#!/usr/bin/env node

'use strict';

var http = require('http');
var iconv = require('iconv-lite');

var callback = function (response) {
    response.pipe(iconv.decodeStream('ISO-8859-1')).collect(function (error, body) {

        body = body.replace(/^.*<p>|\s*<\/p>$/g, '');
        body = body.replace(/<br\s\/>/g, '\n');
        body = body.replace(/&mdash;/g, '-');

        console.log(body);
    });
};

http.request('http://www.xalexandre.com.br/piadasAleiatorias/', callback).end();
